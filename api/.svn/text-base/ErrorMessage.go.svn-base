package api

import (
	"encoding/json"
	"fmt"
)

func BuildErrorMessage(statusCode int, message string, errorCode int) []byte {

	type errorMessage struct {
		StatusCode int
		Message    string
		ErrorCode  int
		MoreInfo   string
	}

	//---------------------------------------
	// populate the error message struct
	//---------------------------------------
	e := errorMessage{statusCode, message, errorCode, fmt.Sprintf("http://developer.mybucket.com/docs/errors/%d", errorCode)}

	//---------------------------------------
	// build the output
	//---------------------------------------
	a := make(map[string]errorMessage)
	a["ErrorMessage"] = e

	output, err := json.Marshal(a)
	if err != nil {
		//TODO - NEED TO REALLY HANDLE THIS ERROR MESSAGE
		panic(err)
	}

	return output
}
